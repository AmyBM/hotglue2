$(document).ready(function(){$.glue.contextmenu.veto("anchor","object-clone");$.glue.contextmenu.veto("anchor","object-link");$.glue.contextmenu.veto("anchor","object-transparency");$.glue.contextmenu.veto("anchor","object-zindex");var a=$('<img src="'+$.glue.base_url+'modules/anchor/anchor.png" alt="btn" title="add a named anchor" width="32" height="32">');$(a).bind("click",function(c){$.glue.menu.hide();var b=prompt("Enter the anchor's name (e.g. #someanchor)");if(b){if(b.substr(0,1)=="#"){b=b.substr(1)}$.glue.backend({method:"glue.create_object",page:$.glue.page},function(e){var d=$('<div class="anchor object" style="position: absolute;" title="this is a named anchor, regular visitors won\'t be seing this icon"><div id="'+b+'" class="glue-anchor-name glue-ui">#'+b+"</div></div>");$(d).attr("id",e.name);$("body").append(d);$(d).css("width",$(d).width()+"px");$(d).css("height",$(d).height()+"px");$(d).css("left",(c.pageX-$(d).outerWidth()/2)+"px");$(d).css("top",(c.pageY-$(d).outerHeight()/2)+"px");$.glue.object.register(d);$.glue.object.save(d)})}});$.glue.menu.register("new",a,14);a=$('<img src="'+$.glue.base_url+'modules/anchor/anchor-name.png" alt="btn" title="change the anchor\'s name" width="32" height="32">');$(a).bind("click",function(f){var d=$(this).data("owner");var b="#"+$(d).children(".glue-anchor-name").attr("id");$.glue.menu.hide();var c=prompt("Enter the anchor's name (e.g. #someanchor)",b);if(c&&c!=b){if(c.substr(0,1)=="#"){c=c.substr(1)}$(d).children(".glue-anchor-name").attr("id",c);$(d).children(".glue-anchor-name").html("#"+c);$.glue.object.save(d)}});$.glue.contextmenu.register("anchor","anchor-name",a)});